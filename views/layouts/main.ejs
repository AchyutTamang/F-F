<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="shortcut icon"
      href="https://fnfimagebucket.s3.ap-south-1.amazonaws.com/menu-items/logo_trans.png"
      type="image/x-icon"
    />
    <title><%= title ? (title + ' - ') : '' %> Froth n Flavours</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#FF6B6B",
              secondary: "#e4a672",
              dark: "#292F36",
              light: "#FFF9EA",
              accent: "#c06c54",
              gold: "#DEB887",
            },
            fontFamily: {
              sans: ["Montserrat", "sans-serif"],
              display: ["Cormorant Garamond", "serif"],
            },
          },
        },
      };
    </script>
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Cormorant+Garamond:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body class="font-sans bg-light min-h-screen flex flex-col">
    <%- include('../partials/nav', {path: "", isAdmin: false}) %>

    <!-- Add padding-top to account for fixed header -->
    <main class="flex-grow pt-20"><%- body %></main>

    <!-- Floating Cart Button for Mobile -->
    <a
      href="/cart"
      class="fixed bottom-6 right-6 bg-primary text-white p-4 rounded-full shadow-lg lg:hidden z-50 hover:bg-primary/90 transition-colors"
      aria-label="Cart"
    >
      <i class="fas fa-shopping-cart text-xl"></i>
      <span
        id="floating-cart-count"
        class="absolute -top-2 -right-2 bg-accent text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-medium"
      >
        0
      </span>
    </a>

    <%- include('../partials/footer') %>

    <script>
      // Sync cart count with floating button
      function updateFloatingCartCount(count) {
        const floatingCartCount = document.getElementById(
          "floating-cart-count"
        );
        if (floatingCartCount) {
          floatingCartCount.textContent = count;
        }
      }

      // Listen for cart updates
      document.addEventListener("DOMContentLoaded", function () {
        const mainCartCount = document.getElementById("cart-count");
        if (mainCartCount) {
          updateFloatingCartCount(mainCartCount.textContent.trim());
          // Create observer for cart count changes
          const observer = new MutationObserver(function (mutations) {
            mutations.forEach(function (mutation) {
              updateFloatingCartCount(mutation.target.textContent.trim());
            });
          });
          observer.observe(mainCartCount, {
            characterData: true,
            childList: true,
            subtree: true,
          });
        }
      });
    </script>
  </body>
</html>
