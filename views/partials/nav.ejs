<nav
  class="header-bg fixed top-0 left-0 w-full z-50 transition-all duration-300"
>
  <div class="container mx-auto px-4">
    <div class="flex justify-between items-center py-3 md:py-4">
      <!-- Logo -->
      <div class="flex items-center">
        <a href="/" class="flex items-center">
          <img
            src="https://fnfimagebucket.s3.ap-south-1.amazonaws.com/menu-items/logo_trans.png"
            alt="F&F Coffee Hub"
            class="h-8 md:h-12 mr-2 md:mr-3 transition-all duration-300"
          />
          <span
            class="text-lg md:text-xl font-medium text-dark hidden sm:inline"
            >Froth & Flavours Coffee Hub</span
          >
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center space-x-4 md:space-x-6">
        <a
          href="/"
          class="nav-link text-sm md:text-base <%= path === '/' ? 'text-primary font-semibold' : 'text-dark hover:text-primary transition-colors' %>"
          >Home</a
        >
        <!-- Menu Dropdown -->
        <div class="dropdown group">
          <a
            href="/menu"
            class="nav-link text-sm md:text-base <%= path === '/menu' ? 'text-primary' : 'text-dark group-hover:text-primary transition-colors' %> flex items-center"
          >
            Menu
          </a>
        </div>

        <a
          href="/merch"
          class="nav-link text-sm md:text-base text-dark hover:text-primary transition-colors"
          >Our Store</a
        >
        <a
          href="/#about"
          class="nav-link text-sm md:text-base text-dark hover:text-primary transition-colors"
          >About Us</a
        >
        <!-- Cart Icon -->
        <a href="/cart" class="text-dark hover:text-primary relative p-2">
          <i class="fas fa-shopping-cart text-base md:text-lg"></i>
          <span
            id="cart-count"
            class="absolute -top-1 -right-1 bg-primary text-white text-xs rounded-full h-4 w-4 md:h-5 md:w-5 flex items-center justify-center text-[10px] md:text-xs"
          >
          </span>
        </a>
        <!-- Contact Us Button -->
        <a
          href="/#contact"
          class="bg-accent hover:bg-accent/90 text-white px-4 md:px-6 py-1.5 md:py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap"
        >
          Contact Us
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <div class="lg:hidden">
        <button
          id="mobile-menu-button"
          class="text-dark focus:outline-none p-2"
        >
          <i class="fas fa-bars text-lg md:text-xl"></i>
        </button>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div
      id="mobile-menu"
      class="hidden fixed top-[60px] left-0 w-full bg-white shadow-lg pb-4 transition-all duration-300 ease-in-out z-50"
    >
      <div class="space-y-3 px-4 py-2">
        <a
          href="/"
          class="block py-3 text-dark hover:text-primary nav-link text-base font-medium <%= path === '/' ? 'text-primary font-semibold' : '' %>"
        >
          Home
        </a>

        <a
          href="/menu"
          class="block py-3 text-dark hover:text-primary nav-link text-base font-medium <%= path === '/menu' ? 'text-primary font-semibold' : '' %>"
        >
          Menu
        </a>

        <a
          href="/merch"
          class="block py-3 text-dark hover:text-primary nav-link text-base font-medium <%= path === '/merch' ? 'text-primary font-semibold' : '' %>"
        >
          Our Store
        </a>

        <a
          href="/#contact"
          class="block py-3 text-dark hover:text-primary nav-link text-base font-medium"
        >
          Contact
        </a>
      </div>
    </div>
  </div>
</nav>

<style>
  .header-bg {
    backdrop-filter: blur(8px);
    background-color: rgba(255, 249, 234, 0.85);
  }

  .header-scrolled {
    background-color: rgba(255, 249, 234, 0.95);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  }

  .dropdown-menu {
    display: none;
    position: absolute;
    top: 100%;
    /* left: 0; */
    background-color: rgba(255, 249, 234, 0.95);
    border-radius: 0.5rem;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    z-index: 50;
  }

  .dropdown:hover .dropdown-menu {
    display: block;
  }
</style>

<script>
  document
    .getElementById("mobile-menu-button")
    .addEventListener("click", function () {
      const mobileMenu = document.getElementById("mobile-menu");
      const menuIcon = this.querySelector("i");
      mobileMenu.classList.toggle("hidden");
      menuIcon.classList.toggle("fa-bars");
      menuIcon.classList.toggle("fa-times");
    });
  document.addEventListener("DOMContentLoaded", () => {
    updateCartCount();
  });

  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem("cart") || "[]");
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);

    // Update cart count in navigation
    const cartCount = document.getElementById("cart-count");
    const mobileCartCount = document.getElementById("mobile-cart-count");

    if (cartCount) {
      cartCount.textContent = totalItems;
      cartCount.classList.toggle("hidden", totalItems === 0);
    }

    if (mobileCartCount) {
      mobileCartCount.textContent = totalItems;
      mobileCartCount.classList.toggle("hidden", totalItems === 0);
    }
  }

  // Mobile menu toggle
  const mobileMenuButton = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");
  const menuIcon = mobileMenuButton.querySelector("i");

  mobileMenuButton.addEventListener("click", () => {
    mobileMenu.classList.toggle("hidden");
    // Toggle menu icon between bars and times (x)
    menuIcon.classList.toggle("fa-bars");
    menuIcon.classList.toggle("fa-times");
  });

  // Mobile menu categories toggle
  function toggleMobileMenuCategories() {
    const categoriesMenu = document.getElementById("mobile-menu-categories");
    const categoryIcon = document.getElementById("category-icon");
    if (categoriesMenu) {
      categoriesMenu.classList.toggle("hidden");
      categoryIcon.classList.toggle("rotate-180");
    }
  }

  // Close mobile menu when clicking outside
  document.addEventListener("click", (event) => {
    if (
      !mobileMenuButton.contains(event.target) &&
      !mobileMenu.contains(event.target)
    ) {
      mobileMenu.classList.add("hidden");
      menuIcon.classList.add("fa-bars");
      menuIcon.classList.remove("fa-times");
    }
  });

  // Header scroll effect
  window.addEventListener("scroll", function () {
    const header = document.querySelector(".header-bg");
    if (window.scrollY > 50) {
      header.classList.add("header-scrolled");
    } else {
      header.classList.remove("header-scrolled");
    }
  });
</script>
